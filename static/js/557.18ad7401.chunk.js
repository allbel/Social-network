"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[557],{2557:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var n=s(1413),r=s(5671),i=s(3144),o=s(136),a=s(5716),l=s(2791);var u=s(181);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i=[],o=!0,a=!1;try{for(s=s.call(e);!(o=(n=s.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){a=!0,r=l}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return i}}(e,t)||(0,u.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d="ProfileInfo_descriptionBlock__znlLW",h="ProfileInfo_mainPhoto__pryhE",f="ProfileInfo_contact__l3VQr",p=s(4374),x=s(184),j=function(e){var t=c((0,l.useState)(!1),2),s=t[0],n=t[1],r=c((0,l.useState)(e.status),2),i=r[0],o=r[1];(0,l.useEffect)((function(){o(e.status)}),[e.status]);return(0,x.jsxs)(x.Fragment,{children:[!s&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Status:"})," ",(0,x.jsx)("span",{onDoubleClick:function(){return n(!0)},children:e.status||"-------"})]}),s&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Status:"})," ",(0,x.jsx)("input",{autoFocus:!0,onBlur:function(){n(!1),e.updateStatusProfile(i)},value:i,onChange:function(e){o(e.currentTarget.value)}})]})]})},v=s(8478),m=s(1812),b=s(6139),P=s(704),g=(0,P.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.profile,n=e.error;return(0,x.jsxs)("form",{onSubmit:t,children:[(0,x.jsx)("div",{children:(0,x.jsx)("button",{children:"Save"})}),n&&(0,x.jsx)("div",{className:"formSummaryError",children:n}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Full name"}),":",(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{component:m.II,name:"fullName",placeholder:"Full name",validate:[]})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Looking for a job"}),":",(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{component:m.II,name:"lookingForAJob",placeholder:"",validate:[],type:"checkbox"})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"My professional skills"}),":",(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{component:m.gx,name:"lookingForAJobDescription",placeholder:"My professional skills",validate:[]})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"About me"}),":",(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{component:m.gx,name:"aboutMe",placeholder:"About Me",validate:[]})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Contacts"}),": ",s.contacts&&Object.keys(s.contacts).map((function(e){return(0,x.jsxs)("div",{className:f,children:[(0,x.jsxs)("b",{children:[e,": "]}),(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{component:m.II,name:"contacts."+e,placeholder:e,validate:[]})})]},e)}))]})]})})),y=function(e){var t=e.profile,s=e.isOwner,n=e.goToEditMode;return(0,x.jsxs)("div",{children:[s&&(0,x.jsx)("div",{children:(0,x.jsx)("button",{onClick:n,children:"Edit"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Full name"}),": ",t.fullName]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:"Contacts"}),": ",t.contacts&&Object.keys(t.contacts).map((function(e){return(0,x.jsx)(k,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},k=function(e){var t=e.contactTitle,s=e.contactValue;return(0,x.jsxs)("div",{className:f,children:[(0,x.jsx)("b",{children:t}),": ",s]})},S=function(e){var t,s=e.profile,n=e.status,r=e.updateStatusProfile,i=e.isOwner,o=e.savePhoto,a=e.saveProfile,u=c((0,l.useState)(!1),2),f=u[0],m=u[1];if(!s)return(0,x.jsx)(p.Z,{});return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:d,children:[(0,x.jsx)(j,{status:n,updateStatusProfile:r}),(0,x.jsx)("img",{src:(null===(t=s.photos)||void 0===t?void 0:t.large)||v,className:h}),i&&(0,x.jsx)("input",{type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&o(e.target.files[0])}}),f?(0,x.jsx)(g,{initialValues:s,profile:s,onSubmit:function(e){a(e).then((function(){return m(!1)}))}}):(0,x.jsx)(y,{profile:s,isOwner:i,goToEditMode:function(){return m(!0)}})]})})},_=s(81),I="MyPosts_posts__AhxFh",w="MyPosts_postsBlock__LtpQN",Z="Post_item__KwiPQ";var A=function(e){return(0,x.jsxs)("div",{className:Z,children:[(0,x.jsx)("img",{src:"https://cdn.fishki.net/upload/post/201505/08/1526580/0_8af37_3d6ed850_xxl.jpg",alt:""}),e.message,(0,x.jsx)("div",{children:(0,x.jsxs)("span",{children:["like: ",e.likeCounts]})})]})},C=s(3079),N=(0,C.D)(10),F=(0,P.Z)({form:"profileAddNewPostForm"})((function(e){return(0,x.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,x.jsx)("div",{children:(0,x.jsx)(b.Z,{component:m.gx,name:"newPostText",placeholder:"Enter your post",validate:[C.C,N]})}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{children:"Add post"})})]})}));var M=function(e){var t=e.posts.map((function(e){return(0,x.jsx)(A,{id:e.id,message:e.message,likeCounts:e.likeCounts},e.id)}));return(0,x.jsxs)("div",{className:w,children:[(0,x.jsx)("h3",{children:"My posts"}),(0,x.jsx)(F,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,x.jsx)("div",{className:I,children:t})]})},E=s(364),O=(0,E.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e((0,_.Pi)(t))}}}))(M);var T=function(e){return(0,x.jsxs)("div",{children:[(0,x.jsx)(S,{profile:e.profile,status:e.status,updateStatusProfile:e.updateStatusProfile,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,x.jsx)(O,{})]})},D=s(9271),J=s(7781),U=s(2932),L=function(e){(0,o.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authUserId)||this.props.history.push("/login"),this.props.getUserProfile(String(e)),this.props.getStatusProfile(String(e))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,x.jsx)(T,(0,n.Z)((0,n.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,status:this.props.status,updateStatusProfile:this.props.updateStatusProfile,savePhoto:this.props.savePhoto}))}}]),s}(l.Component),V=(0,J.qC)((0,E.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:_.et,getStatusProfile:_.Z6,updateStatusProfile:_._H,savePhoto:_.Ju,saveProfile:_.Ii}),D.EN,U.D)(L)}}]);
//# sourceMappingURL=557.18ad7401.chunk.js.map